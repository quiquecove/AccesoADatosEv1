package actividades;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.RandomAccessFile;

public class Vehiculo {
    private String modelo;
    private int anno;
    private double precio;

    public static void main(String[] args) throws IOException, Exception {
        File fl = new File("vehiculos.dat");
        RandomAccessFile raf = new RandomAccessFile(fl, "rw");
        Vehiculo[] vehiculos = new Vehiculo[10];

        vehiculos[0] = new Vehiculo("Toyota Corolla", 2022, 25000.0);
        vehiculos[1] = new Vehiculo("Ford F-150", 2023, 35000.0);
        vehiculos[2] = new Vehiculo("Honda Civic", 2021, 22500.0);
        vehiculos[3] = new Vehiculo("Chevrolet Silverado", 2022, 28000.0);
        vehiculos[4] = new Vehiculo("Volkswagen Golf", 2020, 20000.0);
        vehiculos[5] = new Vehiculo("BMW X5", 2022, 55000.0);
        vehiculos[6] = new Vehiculo("Nissan Altima", 2021, 24000.0);
        vehiculos[7] = new Vehiculo("Jeep Wrangler", 2023, 32000.0);
        vehiculos[8] = new Vehiculo("Hyundai Elantra", 2022, 23500.0);
        vehiculos[9] = new Vehiculo("Mercedes-Benz C-Class", 2023, 50000.0);

        raf.seek(0);
        for (int i = 0; i < vehiculos.length; i++) {
            raf.write(vehiculos[i].getBytes());
        }
        raf.close();
        
        FileInputStream fileInputStream = new FileInputStream("coches.bin");
        ObjectInputStream objectInputStream = new ObjectInputStream(fileInputStream);
        Vehiculo[] cochesLeidos = (Vehiculo[]) objectInputStream.readObject();

        for (Vehiculo coche : cochesLeidos) {
            System.out.println("Modelo: " + coche.getModelo());
            System.out.println("Año de Fabricación: " + coche.anno);
            System.out.println("Precio: " + coche.precio);
            System.out.println();
        }
    }

    public Vehiculo(String modelo, int anno, double precio) {
        this.modelo = modelo;
        this.anno = anno;
        this.precio = precio;
    }

    public String getModelo() {
        return modelo;
    }

    public void setModelo(String modelo) {
        this.modelo = modelo;
    }

    public int getAnno() {
        return anno;
    }

    public void setAnno(int anno) {
        this.anno = anno;
    }

    public double getPrecio() {
        return precio;
    }

    public void setPrecio(double precio) {
        this.precio = precio;
    }

    public byte[] getBytes() {
        byte[] bytes = new byte[modelo.length() + 4 + 8];
        System.arraycopy(modelo.getBytes(), 0, bytes, 0, modelo.length());
        bytes[modelo.length()] = (byte) anno;
        bytes[modelo.length() + 1] = (byte) (anno >> 8);
        bytes[modelo.length() + 2] = (byte) (anno >> 16);
        bytes[modelo.length() + 3] = (byte) (anno >> 24);
        long price = Double.doubleToLongBits(precio);
        bytes[modelo.length() + 4] = (byte) price;
        bytes[modelo.length() + 5] = (byte) (price >> 8);
        bytes[modelo.length() + 6] = (byte) (price >> 16);
        bytes[modelo.length() + 7] = (byte) (price >> 24);
        return bytes;
    }
}
