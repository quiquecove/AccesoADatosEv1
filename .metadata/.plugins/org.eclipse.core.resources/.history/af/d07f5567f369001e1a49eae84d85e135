package XML2;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import org.kxml2.io.*;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.security.NoTypePermission;
import com.thoughtworks.xstream.security.NullPermission;
import com.thoughtworks.xstream.security.PrimitiveTypePermission;

public class XStream3 {

	public static void main(String[] args) throws IOException {

		XStream xs = new XStream();
		xs.allowTypesByWildcard(new String[] { "com.XML2.*" });

		xs.addPermission(NoTypePermission.NONE);
		xs.addPermission(NullPermission.NULL);
		xs.addPermission(PrimitiveTypePermission.PRIMITIVES);

		Class[] clases = { ListaAlumnos.class, AlumnoCFGS.class };
		xs.allowTypes(clases);

		xs.alias("ListaAlumnos", ListaAlumnos.class);
		xs.alias("Alumno", AlumnoCFGS.class);

		xs.addImplicitCollection(ListaAlumnos.class, "lista");

		File fl = new File("ListaAlumnos.xml");
		fl.createNewFile();
		ListaAlumnos listAL;
		FileOutputStream fo = new FileOutputStream(fl);
		for (int i = 1; i < 4; i++) {

			FileInputStream fis = new FileInputStream("fila" + i + ".xml");

			listAL = (ListaAlumnos) xs.fromXML(fis);
			xs.toXML(listAL, new FileOutputStream("ListaAlumnos.xml", true));
		}

	}

}
