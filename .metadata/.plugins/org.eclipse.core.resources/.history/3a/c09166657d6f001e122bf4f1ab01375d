package dia1;

import com.db4o.Db4oEmbedded;
import com.db4o.ObjectContainer;
import com.db4o.ObjectSet;

public class AumentarEdad {

	public static void main(String[] args) {
		ObjectContainer db = Db4oEmbedded.openFile(Db4oEmbedded.newConfiguration(), "alumnos.yap");
		ObjectSet<AlumnoCFGS> os = db.queryByExample(AlumnoCFGS.class);
		AlumnoCFGS alumno;
		byte edad;
		float altura;

		while (os.hasNext()) {
			alumno = os.next();
			if (alumno.getNoGrupo() == 2) {
				db.delete(alumno); // Elimina el alumno si su NoGrupo es igual a 2
			} else {
				edad = alumno.getEdad();
				alumno.setEdad((byte) (edad + 1));
				altura = alumno.getAlturaAproxEnMetros();
				alumno.setAlturaAproxEnMetros(altura + 0.01f);
				db.store(alumno); // Actualiza el objeto en la base de datos
			}
			System.out.println(alumno);
		}

		db.commit(); // Guarda los cambios en la base de datos
		db.close();
	}
}
